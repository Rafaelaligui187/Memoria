ğŸ§© Correct Render Setup for Next.js (with Middleware)
âœ… 1ï¸âƒ£ Build Command
In your Render dashboard â†’ your service â†’ Settings tab â†’ scroll down to â€œBuild Commandâ€.
Make sure itâ€™s exactly:
npm install && npm run build

âœ… NOT npm run dev
Render cannot use dev mode â€” it must build production assets (.next/server etc.) first.

âœ… 2ï¸âƒ£ Start Command
Also in the Render â€œSettingsâ€ tab â†’ â€œStart Commandâ€ should be:
npm start

This makes Render run the production server that next build generated.

âœ… 3ï¸âƒ£ Make sure your package.json scripts look like this:
Open your package.json and check:
{
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start"
  }
}

If you only have "dev", add "build" and "start" as shown above.

âœ… 4ï¸âƒ£ Check Middleware again (final version)
Make sure your middleware.ts has:
export const config = {
  matcher: [
    "/((?!_next/static|_next/image|favicon.ico|.*\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)",
  ],
  runtime: "nodejs", // ğŸ‘ˆ this line must be here
}


âœ… 5ï¸âƒ£ Redeploy Cleanly
Then do this on your local terminal:
rm -rf .next
npm run build
git add .
git commit -m "Fix Render EvalError with Node runtime"
git push origin main

Render will auto-redeploy your project after you push.
Wait until it finishes, then test your Render URL again.

ğŸ” Why npm run dev fails on Render


npm run dev starts a development server, not a production build.


The Edge sandbox (eval disallowed) only applies to production builds â€” so locally it works fine, but fails on Render.


Thatâ€™s why the correct fix is to build (npm run build) and run (npm start) with the Node runtime.



If you want, paste your Render:


Build Command


Start Command


package.json scripts section


and Iâ€™ll confirm everything is aligned for your environment.